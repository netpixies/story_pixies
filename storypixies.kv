#:kivy 1.10.1
#: import SimpleTableLayout kivy.garden.SimpleTableLayout
#: import win kivy.core.window
#: import partial functools.partial


<MainMenu>:
    rows: 1
    size_hint: (1, None)
    height: 50
    spacing: 5
    padding: 5
    homebutton: homebutton
    librarybutton: librarybutton
    storybutton: storybutton
    creatorbutton: creatorbutton
    ToggleButton:
        id: homebutton
        group: 'mainmenu'
        state: 'down'
        text: 'Home'
        on_press: app.home_screen(self)
    ToggleButton:
        id: librarybutton
        group: 'mainmenu'
        text: 'Library'
        on_press: app.library_screen(self)
    ToggleButton:
        id: storybutton
        group: 'mainmenu'
        text: 'Story'
        on_press: app.story_screen(self)
    ToggleButton:
        id: creatorbutton
        group: 'mainmenu'
        text: 'Creator'
        on_press: app.creator_screen(self)


<LibraryButton>:
    libraries: app.libraries
    selected_library: app.selected_library
    manager: app.manager
    background_normal: 'images/backgrounds/button.png'
    font_size: 60
    bold: True
    outline_width: 10
    italic: True
    height: 200
    size_hint_y: None
    outline_color: (0,0,0,0)
    on_press: app.set_selected_library(self.text)
    on_release: app.library_screen(self)

<Home>:
    id: home_screen
    libraries: app.libraries
    app: app

    GridLayout:
        id: home_grid
        rows: 1
        spacing: 10
        ScrollView:
            bar_width: 0
            id: library_scroll_view
            size_hint_x: 1
            size_hint_y: None
            size: (win.Window.width,win.Window.height)
            GridLayout:
                id: library_grid
                cols: 1
                size_hint_y: None
                size_hint_x: 1
                spacing: 10
                padding: 10
                scroll_y: slider.value
                on_touch_move: slider.value = self.scroll_y

        Slider:
            size_hint_x: None
            width: root.width*0.2
            id: slider
            min: 0
            max: 1
            orientation: 'vertical'
            value: library_scroll_view.scroll_y
            on_value: library_scroll_view.scroll_y = self.value


<Library>:
    id: library_grid
    app: app

<Story>:
    id: story_grid
    app: app

<Creator>:
    id: creator_grid
    app: app
